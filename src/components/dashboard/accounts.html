<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Accounts | Steam Account Manager</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
        <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    </head>
    <body onload="javascript:requestAccounts()" class="bg-gray-900 overflow-hidden">
        <script>

            const socket = io();

            function requestAccounts(){
                socket.emit('request_accounts', 'accounts');
            }

            socket.on('accounts_update', function(accounts) {
                let table = document.querySelector('#accTable');
                let tr = document.createElement('tr');
                accounts.forEach(a => {
                    let tds = [
                        document.createElement('td'),
                        document.createElement('td'),
                        document.createElement('td'),
                        document.createElement('td'),
                        document.createElement('td'),
                    ];
                    tds[0].innerHTML = a.login;
                    tds[0].className = 'text-center';
                    tds[1].innerHTML = `<button class="bg-transparent w-6 h-6"><img href="https://steamcommunity.com/profiles/${a.ID}" src="https://i.imgur.com/U7Zp5Nb.png" alt="Steam Logo"></button>`;
                    tds[1].className = 'text-center';
                    tds[2].innerHTML = `<button class="bg-transparent w-6 h-6"><img src="https://i.imgur.com/fqrhB54.png" alt="Key Icon"></button>`;
                    tds[2].className = 'text-center';
                    tds[3].innerHTML = `<button class="bg-transparent w-6 h-6"><img src="https://i.imgur.com/xnmRNgX.png" alt="Gamepad Icon"></button>`;
                    tds[3].className = 'text-center';
                    tds[4].innerHTML = `<button class="bg-transparent w-6 h-6"><span class="rounded-full bg-green-500 w-5 h-5 block"></span></button>`;
                    tds[4].className = 'text-center';
                    tds.forEach(td => tr.appendChild(td));
                });
                table.appendChild(tr);
            });

        </script>
        <div class="flex flex-col items-center pt-16">
            <div class="flex mb-8">
                <a href="/dashboard"><button class="bg-gray-900 text-white text-lg px-4 py-2 mr-2 border-b-2 border-transparent hover:border-white">Dashboard</button></a>
                <a href="/accounts"><button class="bg-gray-900 text-white text-lg px-4 py-2 mr-2 border-b-2 border-transparent hover:border-white">Accounts</button></a>
                <a href="/games"><button class="bg-gray-900 text-white text-lg px-4 py-2 mr-2 border-b-2 border-transparent hover:border-white">Games</button></a>
                <a href="https://github.com/TheM-Dev/SteamAccountManager/wiki/FAQ"><button class="bg-gray-900 text-white text-lg px-4 py-2 mr-2 border-b-2 border-transparent hover:border-white">FaQ</button></a>
                <a href="https://github.com/TheM-Dev/SteamAccountManager/issues"><button class="bg-gray-900 text-white text-lg px-4 py-2 mr-2 border-b-2 border-transparent hover:border-white">Support</button></a>
            </div>
        </div>
        <div class="container mx-auto py-8">
            <h1 class="text-4xl text-white mb-8">Account List</h1>
            <table class="table table-dark">
                <thead>
                    <tr>
                        <th scope="col" class="text-center">Account Name</th>
                        <th scope="col" class="text-center">Steam</th>
                        <th scope="col" class="text-center">Guard</th>
                        <th scope="col" class="text-center">Idle</th>
                        <th scope="col" class="text-center">ON/OFF</th>
                    </tr>
                </thead>
                <tbody id="accTable">
                </tbody>
            </table>
        </div>
    </body>
</html>